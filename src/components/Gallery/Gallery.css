.gallery ul {
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  flex-wrap: wrap;
  flex-flow: row wrap;
}

.gallery li {
  height: 50vh;
  max-height: 600px;
  padding: 5px;
  flex-grow: 1;
  list-style: none;
}

.gallery img {
  max-height: 100%;
  min-width: 100%;
  object-fit: cover;
  vertical-align: bottom;
}

.gallery li:nth-last-child(-n+1){
  max-height: none;
  flex-grow: 0;
}

.gallery li:nth-last-child(-n+1) img {
  min-height: 100%;
}